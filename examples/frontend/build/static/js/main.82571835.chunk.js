(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n(69)},43:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),l=n.n(a),r=n(34),c=n.n(r),u=(n(43),n(4)),o=n(7),s=n(9),i=n(11),m=n(6),h=n(10),d=n(13),p=n.n(d),E=(n(67),n(8)),f=function(e){var t=e.user;return l.a.createElement("tr",null,l.a.createElement("td",null,t.id),l.a.createElement("td",null,l.a.createElement(E.b,{to:"/users/".concat(t.id)},t.user_name)),l.a.createElement("td",null,t.first_name),l.a.createElement("td",null,t.last_name),l.a.createElement("td",null,t.email))},b=function(e){var t=e.users;return l.a.createElement("table",null,l.a.createElement("th",null,"ID User"),l.a.createElement("th",null,"User name"),l.a.createElement("th",null,"First name"),l.a.createElement("th",null,"Last name"),l.a.createElement("th",null,"Email user"),t.map(function(e){return l.a.createElement(f,{user:e})}))},v=function(e){var t=e.project,n=e.delete_project;e.create_project;return l.a.createElement("tr",null,l.a.createElement("td",null,t.id),l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.linkGitHub),l.a.createElement("td",null,t.users),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return n(t.id)},type:"button"},"Delete")))},g=function(e){var t=e.projects,n=e.delete_project;return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("th",null,"ID Project"),l.a.createElement("th",null,"Name Project"),l.a.createElement("th",null,"Link GitHub"),l.a.createElement("th",null,"ID Users"),t.map(function(e){return l.a.createElement(v,{project:e,delete_project:n})})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(E.b,{to:"/projects/create"},"Create"))},j=n(0),k=function(e){var t=e.project;return l.a.createElement("tr",null,l.a.createElement("td",null,t.id),l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.linkGitHub),l.a.createElement("td",null,t.users))},_=function(e){var t=e.projects,n=Object(j.o)().userId;console.log(n);var a=t.filter(function(e){return e.users.includes(parseInt(n))});return l.a.createElement("table",null,l.a.createElement("th",null,"ID Project"),l.a.createElement("th",null,"Name Project"),l.a.createElement("th",null,"Link GitHub"),l.a.createElement("th",null,"ID Users"),a.map(function(e){return l.a.createElement(k,{project:e})}))},y=function(e){var t=e.todo,n=e.deleteToDo;return l.a.createElement("tr",null,l.a.createElement("td",null,t.project),l.a.createElement("td",null,t.text),l.a.createElement("td",null,t.create_publish),l.a.createElement("td",null,t.update_publish),l.a.createElement("td",null,t.users),l.a.createElement("td",null,t.status),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return n(t.id)},type:"button"},"Delete")))},C=function(e){var t=e.todos,n=e.deleteToDo;return l.a.createElement("table",null,l.a.createElement("th",null,"ID Project"),l.a.createElement("th",null,"Text ToDo"),l.a.createElement("th",null,"Create ToDo"),l.a.createElement("th",null,"Update ToDo"),l.a.createElement("th",null,"ID User"),l.a.createElement("th",null,"status ToDo"),t.map(function(e){return l.a.createElement(y,{todo:e,deleteToDo:n})}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(E.b,{to:"/todos/create"},"Create"))},O=function(e){e.menu;return l.a.createElement("div",{class:"header"},l.a.createElement("div",{class:"container"},l.a.createElement("h2",null,"Header ToDO Notes ")))},D=function(e){e.footer;return l.a.createElement("div",{class:"footer"},l.a.createElement("div",{class:"container"},l.a.createElement("p",null,"Copyrights \xa9 2022 Footer GeekBrains ToDO Notes ")))},S=function(){var e=Object(j.k)().pathname;return l.a.createElement("div",null,l.a.createElement("h1",null," Page not found ( ",e," ) \u041e\u0448\u0438\u0431\u043a\u0430 404 "))},x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={login:"",password:""},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return l.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},l.a.createElement("input",{type:"text",name:"login",placeholder:"Login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("input",{type:"submit",value:"Login"}))}}]),t}(l.a.Component),T=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={title:"",linkGitHub:"",users:[]},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.create_project(this.state.title,this.state.linkGitHub,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return l.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},l.a.createElement("br",null),l.a.createElement("label",{for:"title"},"\u041f\u0440\u043e\u0435\u043a\u0442",l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("label",{for:"linkGitHub"},"GitHub",l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"linkGitHub",value:this.state.linkGitHub,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("br",null),l.a.createElement("label",{for:"users"},"\u0410\u0432\u0442\u043e\u0440\u044b",l.a.createElement("div",null,l.a.createElement("select",{name:"users",multiple:!0,onChange:function(t){return e.handleUserChange(t)}},this.props.users.map(function(e){return l.a.createElement("option",{value:e.id},e.last_name)})))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}))}}]),t}(l.a.Component),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={text:"CrateToDo",status:"active",project:"",users:[]},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.create_todo(this.state.text,this.state.status,this.state.project,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return l.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},l.a.createElement("br",null),l.a.createElement("label",{for:"text"},"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438",l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("label",{for:"status"},"\u0421\u0442\u0430\u0442\u0443\u0441",l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"status",value:this.state.status,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("br",null),l.a.createElement("label",{for:"project"},"\u041f\u0440\u043e\u0435\u043a\u0442",l.a.createElement("div",null,l.a.createElement("input",{type:"text",name:"project",value:this.state.project,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("br",null),l.a.createElement("label",{for:"users"},"\u0410\u0432\u0442\u043e\u0440\u044b",l.a.createElement("div",null,l.a.createElement("select",{name:"users",multiple:!0,onChange:function(t){return e.handleUserChange(t)}},this.props.users.map(function(e){return l.a.createElement("option",{value:e.id},e.last_name)})))),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}))}}]),t}(l.a.Component),G=n(23),H=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={users:[],projects:[],todos:[],token:""},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"set_token",value:function(e){var t=this;(new G.a).set("token",e),this.setState({token:e},function(){return t.load_data()})}},{key:"is_authenticated",value:function(){return""!=this.state.token}},{key:"deleteToDo",value:function(e){var t=this,n=this.get_headers();p.a.delete("http://194.58.123.234:8000/api/todos/".concat(e),Object(u.a)({headers:n},"headers",n)).then(function(n){t.setState({todos:t.state.todos.filter(function(t){return t.id!==e})})}).catch(function(e){return console.log(e)})}},{key:"create_todo",value:function(e,t,n,a){var l=this,r=this.get_headers(),c={text:e,status:t,project:n,users:a};p.a.post("http://194.58.123.234:8000/api/todos/",c,{headers:r}).then(function(e){l.load_data()}).catch(function(e){console.log(e),l.setState({todos:[]})})}},{key:"create_project",value:function(e,t,n){var a=this,l=this.get_headers(),r={title:e,linkGitHub:t,users:n};p.a.post("http://194.58.123.234:8000/api/projects/",r,{headers:l}).then(function(e){a.load_data()}).catch(function(e){console.log(e),a.setState({projects:[]})})}},{key:"delete_project",value:function(e){var t=this,n=this.get_headers();p.a.delete("http://194.58.123.234:8000/api/projects/".concat(e),Object(u.a)({headers:n},"headers",n)).then(function(n){t.setState({projects:t.state.projects.filter(function(t){return t.id!==e})})}).catch(function(e){return console.log(e)})}},{key:"logout",value:function(){this.set_token("")}},{key:"get_token_from_storage",value:function(){var e=this,t=(new G.a).get("token");this.setState({token:t},function(){return e.load_data()})}},{key:"get_token",value:function(e,t){var n=this;p.a.post("http://194.58.123.234:8000/api-token-auth/",{username:e,password:t}).then(function(e){n.set_token(e.data.token)}).catch(function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")})}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_authenticated()&&(e.Authorization="Token "+this.state.token),e}},{key:"load_data",value:function(){var e=this,t=this.get_headers();p.a.get("http://194.58.123.234:8000/api/users/",{headers:t}).then(function(t){e.setState({users:t.data})}).catch(function(e){return console.log(e)}),p.a.get("http://194.58.123.234:8000/api/projects/",{headers:t}).then(function(t){e.setState({projects:t.data})}).catch(function(e){return console.log(e)}),p.a.get("http://194.58.123.234:8000/api/todos/",{headers:t}).then(function(t){e.setState({todos:t.data})}).catch(function(t){console.log(t),e.setState({todos:[]})})}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(O,null),l.a.createElement(E.a,null,l.a.createElement("nav",null,l.a.createElement("li",null,l.a.createElement(E.b,{to:"/"},"\u041d\u043e\u043c\u0435")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/users"},"UserList")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/projects"},"ProjectList")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/todos"},"ToDOList")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("li",null,this.is_authenticated()?l.a.createElement("button",{onClick:function(){return e.logout()}},"Logout"):l.a.createElement(E.b,{to:"/login"},"Login")),l.a.createElement("br",null)),l.a.createElement(j.d,null,l.a.createElement(j.b,{exact:!0,path:"/",element:l.a.createElement(j.a,{to:"/users"})}),l.a.createElement(j.b,{exact:!0,path:"/login",element:l.a.createElement(x,{get_token:function(t,n){return e.get_token(t,n)}})}),l.a.createElement(j.b,{path:"/users"},l.a.createElement(j.b,{index:!0,element:l.a.createElement(b,{users:this.state.users})}),l.a.createElement(j.b,{path:":userId",element:l.a.createElement(_,{projects:this.state.projects})})),l.a.createElement(j.b,{exact:!0,path:"/projects",element:l.a.createElement(g,{projects:this.state.projects,delete_project:function(t){return e.delete_project(t)}})}),l.a.createElement(j.b,{exact:!0,path:"/projects/create",element:l.a.createElement(T,{users:this.state.users,create_project:function(t,n,a){return e.create_project(t,n,a)}})}),l.a.createElement(j.b,{exact:!0,path:"/todos",element:l.a.createElement(C,{todos:this.state.todos,deleteToDo:function(t){return e.deleteToDo(t)}})}),l.a.createElement(j.b,{exact:!0,path:"/todos/create",element:l.a.createElement(w,{users:this.state.users,create_todo:function(t,n,a,l){return e.create_todo(t,n,a,l)}})}),l.a.createElement(j.b,{path:"*",element:l.a.createElement(S,null)}))),l.a.createElement(D,null))}}]),t}(l.a.Component),I=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,70)).then(function(t){var n=t.getCLS,a=t.getFID,l=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(H,null))),I()}},[[35,3,2]]]);
//# sourceMappingURL=main.82571835.chunk.js.map